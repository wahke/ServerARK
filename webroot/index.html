<!--
  Projekt: ServerARK
  Copyright (c) 2021-2025 wahke.lu
  Website: https://wahke.lu
  Lizenz: MIT
  Alle Rechte vorbehalten.

  File: webroot/index.html
-->
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>ServerArk WebUI</title>
    <link rel="stylesheet" href="style.css">
    <script src="app.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="nav-left">
            <div class="nav-title">ServerArk</div>
        </div>
        <div class="nav-center nav-tabs" id="nav-tabs" style="display:none;">
            <button class="tab-btn active" data-tab="tab-status" data-i18n="tab_status">Status</button>
            <button class="tab-btn" data-tab="tab-config" data-i18n="tab_config">Config</button>
            <button class="tab-btn" data-tab="tab-blocked" data-i18n="tab_blocked">Blocked IPs</button>
            <button class="tab-btn" data-tab="tab-whitelist" data-i18n="tab_whitelist">Whitelist</button>
            <button class="tab-btn" data-tab="tab-logs" data-i18n="tab_logs">Logs</button>
        </div>
        <div class="nav-lang">
            <select id="lang-select" onchange="setLang(this.value)">
                <option value="de">DE</option>
                <option value="en">EN</option>
            </select>
        </div>
    </div>

    <div id="login-box" class="card">
    <h2 data-i18n="login_title">Login</h2>

    <p data-i18n="login_user_hint">Benutzername:</p>
    <input type="text" id="username" data-i18n-ph="login_user_placeholder" placeholder="">

    <p data-i18n="login_hint">Passwort:</p>
    <input type="password" id="password" data-i18n-ph="login_password_placeholder" placeholder="">
    </br>
    <button onclick="doLogin()" data-i18n="login_btn">Login</button>
    <p id="login-error" class="error"></p>
    </div>


    <div id="main" style="display:none;">
        <div id="tab-status" class="tab card">
            <h2 data-i18n="status_title">Status</h2>
            <p><strong data-i18n="status_enabled_label">Status:</strong> <span id="status-enabled"></span></p>
            <p><strong data-i18n="status_frequency_label">Frequency:</strong> <span id="status-frequency"></span> s</p>
            <p><strong data-i18n="status_threshold_label">Threshold:</strong> <span id="status-threshold"></span></p>
            <button onclick="toggle()" class="primary-btn" id="status-toggle-btn" data-i18n="status_toggle_btn">An/Aus schalten</button>
        </div>

        <div id="tab-config" class="tab card" style="display:none;">
            <h2 data-i18n="config_title">Konfiguration (Analyse + WebUI)</h2>
            <form onsubmit="saveConfig(); return false;">
                <div class="form-row">
                    <label data-i18n="cfg_enabled">Enabled:</label>
                    <input id="cfg-enabled" type="number" min="0" max="1">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_frequency">Frequency (s):</label>
                    <input id="cfg-frequency" type="number">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_threshold">Threshold:</label>
                    <input id="cfg-threshold" type="number" step="0.1">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_interface">Capture Interface:</label>
                    <input id="cfg-interface" type="text" data-i18n-ph="cfg_interface_placeholder" placeholder="">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_network">Network (BPF):</label>
                    <input id="cfg-network" type="text" data-i18n-ph="cfg_network_placeholder" placeholder="">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_udp_persec">UDP per Sec (pro Spieler):</label>
                    <input id="cfg-udp-persec" type="number">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_max_blocked">Max blocked IPs:</label>
                    <input id="cfg-max-blocked" type="number">
                </div>
                <hr>
                <div class="form-row">
                    <label data-i18n="cfg_listen_ip">Web Listen IP:</label>
                    <input id="cfg-listen-ip" type="text">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_port">Web Port:</label>
                    <input id="cfg-port" type="number">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_user">Web User:</label>
                    <input id="cfg-user" type="text">
                </div>
                <div class="form-row">
                    <label data-i18n="cfg_password">Web Passwort:</label>
                    <input id="cfg-password" type="text">
                </div>
                <button type="submit" class="primary-btn" data-i18n="cfg_save">Speichern</button>
            </form>
            <p id="cfg-msg"></p>
        </div>

        <div id="tab-blocked" class="tab card" style="display:none%;">
            <h2 data-i18n="blocked_title">Gesperrte IPs</h2>
            <p data-i18n="blocked_hint">Liste der aktuell per iptables geblockten IP-Adressen.</p>
            <table id="blocked-table">
                <thead>
                    <tr>
                        <th data-i18n="blocked_ip">IP</th>
                        <th data-i18n="blocked_action">Aktion</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <p id="blocked-msg"></p>
        </div>

        <div id="tab-whitelist" class="tab card" style="display:none;">
            <h2 data-i18n="wl_title">Whitelist</h2>
            <p data-i18n="wl_hint">IPs in der Whitelist werden <strong>nie geblockt</strong>. Wenn sie bereits geblockt waren, werden sie automatisch entblockt.</p>
            <div class="form-row">
                <label data-i18n="wl_add_label">Neue IP zur Whitelist hinzufügen:</label>
                <input id="wl-new-ip" type="text" data-i18n-ph="wl_new_ip_placeholder" placeholder="">
            </div>
            <button onclick="whitelistAdd()" class="primary-btn" data-i18n="wl_add_btn">Hinzufügen</button>
            <p id="whitelist-msg"></p>
            <table id="whitelist-table">
                <thead>
                    <tr>
                        <th data-i18n="wl_ip">IP</th>
                        <th data-i18n="wl_action">Aktion</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div id="tab-logs" class="tab card" style="display:none;">
            <h2 data-i18n="logs_title">Logs (live)</h2>
            <pre id="logs-box"></pre>
        </div>
    </div>
    <footer class="footer">
        <span data-i18n="footer_text">
            © 2025 wahke.lu – Idee von drboyd
        </span>
    </footer>
</body>
</html>
